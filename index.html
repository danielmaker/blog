<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Daniel Jslin</title>
  <meta name="author" content="Daniel Lin">

  <link href="https://danielmaker.github.io/blog/feeds/atom.xml" type="application/atom+xml" rel="alternate"
        title="Daniel Jslin Atom Feed" />
  <link href="https://danielmaker.github.io/blog/feeds/rss.xml" type="application/rss+xml" rel="alternate"
        title="Daniel Jslin RSS Feed" />



  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="https://danielmaker.github.io/blog/favicon.png" rel="icon">

  <link href="https://danielmaker.github.io/blog/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="https://danielmaker.github.io/blog/">Daniel Jslin</a></h1>
    <h2>May the source be with you</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="https://danielmaker.github.io/blog/feeds/atom.xml" rel="subscribe-atom">Atom</a></li>
  <li><a href="https://danielmaker.github.io/blog/feeds/rss.xml" rel="subscribe-rss">RSS</a></li>
</ul>

<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="danielmaker.github.io/blog">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<ul class="main-navigation">
      <li >
        <a href="https://danielmaker.github.io/blog/category/about.html">About</a>
      </li>
      <li >
        <a href="https://danielmaker.github.io/blog/category/linux.html">Linux</a>
      </li>
</ul></nav>
  <div id="main">
    <div id="content">
<div class="blog-index">
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://danielmaker.github.io/blog/linux/inside_start_kernel.html">深入淺出 start_kernel()</a>
      </h1>
    <p class="meta">
<time datetime="2016-05-16T00:00:00+08:00" pubdate>2016-05-16, Mon</time>    </p>
</header>

  <div class="entry-content"><p>當 bootloader 載入核心映像檔(zImage, or bzImage) 之後，在核心映像檔最開頭的 bootstrap code 會負責關閉中斷，初始化記憶體設定等硬體初始化工作，最後解壓縮內核。
不同的硬體架構會有不同的設定方式，大致的流程如下圖所示：</p>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: start_kernel Pages: 1 -->
<svg width="366pt" height="286pt"
 viewBox="0.00 0.00 366.19 286.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 282)">
<title>start_kernel</title>
<!-- booting -->
<g id="node1" class="node"><title>booting</title>
<polygon fill="lightgrey" stroke="black" points="223.382,-278 80.1821,-278 80.1821,-242 223.382,-242 223.382,-278"/>
<text text-anchor="middle" x="151.782" y="-255.8" font-family="monospace" font-size="14.00">arch/*/boot/</text>
</g>
<!-- low_level_init -->
<g id="node2" class="node"><title>low_level_init</title>
<polygon fill="lightgrey" stroke="black" points="303.347,-136 0.217461,-136 0.217461,-100 303.347,-100 303.347,-136"/>
<text text-anchor="middle" x="151.782" y="-113.8" font-family="monospace" font-size="14.00">arch/*/kernel/head*.S, head*.c</text>
</g>
<!-- booting&#45;&gt;low_level_init -->
<g id="edge1" class="edge"><title>booting&#45;&gt;low_level_init</title>
<path fill="none" stroke="black" d="M151.782,-241.833C151.782,-218.007 151.782,-174.658 151.782,-146.349"/>
<polygon fill="black" stroke="black" points="155.282,-146.307 151.782,-136.307 148.282,-146.307 155.282,-146.307"/>
<text text-anchor="start" x="151.782" y="-212.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;Booting </text>
<text text-anchor="start" x="151.782" y="-198.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#45; disable interrupt </text>
<text text-anchor="start" x="151.782" y="-184.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#45; prepare memory </text>
<text text-anchor="start" x="151.782" y="-170.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#45; clean bss section </text>
<text text-anchor="start" x="151.782" y="-156.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#45; decompress zImage (or bzImag) &#160;</text>
</g>
<!-- start_kernel -->
<g id="node3" class="node"><title>start_kernel</title>
<polygon fill="#66ff99" stroke="black" points="286.551,-36 17.0135,-36 17.0135,-0 286.551,-0 286.551,-36"/>
<text text-anchor="middle" x="151.782" y="-13.8" font-family="monospace" font-size="14.00">init/main.c: start_kernel()</text>
</g>
<!-- low_level_init&#45;&gt;start_kernel -->
<g id="edge2" class="edge"><title>low_level_init&#45;&gt;start_kernel</title>
<path fill="none" stroke="black" d="M151.782,-99.9297C151.782,-85.1248 151.782,-63.432 151.782,-46.2312"/>
<polygon fill="black" stroke="black" points="155.282,-46.2035 151.782,-36.2035 148.282,-46.2035 155.282,-46.2035"/>
<text text-anchor="start" x="151.782" y="-70.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;Low&#45;level initialization ...</text></g></g></svg></div>
  <footer>
    <a rel="full-article" href="https://danielmaker.github.io/blog/linux/inside_start_kernel.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://danielmaker.github.io/blog/linux/start_kernel.html">核心的進入點: start_kernel()</a>
      </h1>
    <p class="meta">
<time datetime="2016-01-12T00:00:00+08:00" pubdate>2016-01-12, Tue</time>    </p>
</header>

  <div class="entry-content"><!-- ............................................................................. -->
<style type="text/css">
    .red    { color: red;   }
    .blue   { color: blue;  }
    .red-b  { color: red;  font-weight: bold; }
    .blue-b { color: blue; font-weight: bold; }
    .green  { color: green;  }
    .gray   { color: gray;  }
    .diagram {line-height: 1;}
</style><!-- ............................................................................. -->
<!--  -->
<blockquote>
<object class="diagram" data="https://danielmaker.github.io/blog/linux/images/start_kernel_call_graph.svg" style="width: 100%;" type="image/svg+xml">
</object>
<a style="font-size: 75%;" href="https://danielmaker.github.io/blog/linux/images/start_kernel_call_graph.svg">larger call graph</a></blockquote>
<div class="section" id="id1">
<h2>start_kernel</h2>
<p>start_kernel() 是 Linux kernel &quot;正式的&quot;進入點，但是 start_kernel()
通常不是在核心被載入後就立刻被執行，在它開始執行之前還有些準備工作要先完成。
在核心被載入後，通常最開始被執行的是的放在 Linux kernel image 最開頭的 bootstrap code, 負責關閉中斷，記憶體設定等硬體初始化準備工作，甚至還包含將壓縮的內核解壓縮 ...</p></div></div>
  <footer>
    <a rel="full-article" href="https://danielmaker.github.io/blog/linux/start_kernel.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://danielmaker.github.io/blog/linux/linux_kernel_beginning.html">Linux Kernel 探險地圖</a>
      </h1>
    <p class="meta">
<time datetime="2015-12-24T00:00:00+08:00" pubdate>2015-12-24, Thu</time>    </p>
</header>

  <div class="entry-content"><!-- ............................................................................. -->
<style type="text/css">
    .red    { color: red;   }
    .blue   { color: blue;  }
    .red-b  { color: red;  font-weight: bold; }
    .blue-b { color: blue; font-weight: bold; }
    .green  { color: green;  }
    .gray   { color: gray;  }
</style><style type="text/css">

.source-tree
{
    line-height: 100%;
        color: #000000;
        background: #eeeeee;
}

</style><!-- ............................................................................. -->
<p>Linux kernel 就像是一個龐大的迷宮，如果沒有適當的引導，常讓想要了解它的新手不知道要如何開始。
所幸，Linux kernel 是指標性的開放源碼專案，有許多的前輩高人留下相當多的資料，也有許多人持續在研究它，並且將成果及心得公開在網路上，這對有心想要了解它的人是很好的參考資料來源。</p>
<p>雖然網路上已經有許多資料可供參考，但是它們沒辦法也沒必要解答我所有的疑問，許多細節之處必須親身碰過才會有感覺。
像我這樣對 Linux kernel 有與趣，想了解它是如何運作及如何被設計的人 ...</p></div>
  <footer>
    <a rel="full-article" href="https://danielmaker.github.io/blog/linux/linux_kernel_beginning.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://danielmaker.github.io/blog/about/may-the-source-be-with-you.html">May The Source Be With You</a>
      </h1>
    <p class="meta">
<time datetime="2015-12-17T00:00:00+08:00" pubdate>2015-12-17, Thu</time>    </p>
</header>

  <div class="entry-content"><img alt="'may-the-source-be-with-you'" src="https://danielmaker.github.io/blog/about/may-the-source-be-with-you.jpg" />
<p>image by anonymous</p>
<p>對軟體工程師而言，我們很幸運生在一個開放源始碼如此蓬勃發展的時代，有許多優秀的開源軟體專案可以讓我們好好利用及研究。
就如同一個優秀的文學家經由閱讀其他文學大師的作品來提升自已一樣，軟體工程師也是經由觀摩其他優秀的軟體設計來讓自已的能力提升。
另一方面，開放源碼運動亦造就了軟體開發社群的蓬勃發展，經由分享及社群參與，軟體開發人員之間得以互相切磋討論，集合眾人的力量完成更大的目標，並以開源的方式讓更多人參與。
社群與開放源碼運動之間形成一個密不可分的正向循環，生生不息。
這兩點正是本部落格的目標：藉由分析並學習優秀的開源軟體設計來讓自已的能力提升；藉由分享帶來回饋與交流，形成一個正向循環。</p>
<p>開源軟體就如同 Star Wars 裡絕地武士的原力一般，如果我們對它夠了解，它將會給我們帶來力量，
它就是我們軟體工程師的原力來源。 May the source be with you.</p>
</div>
  		</article>
<div class="pagination">

  <br />
</div></div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="https://danielmaker.github.io/blog/linux/inside_start_kernel.html">深入淺出 start_kernel()</a>
      </li>
      <li class="post">
          <a href="https://danielmaker.github.io/blog/linux/start_kernel.html">核心的進入點: start_kernel()</a>
      </li>
      <li class="post">
          <a href="https://danielmaker.github.io/blog/linux/linux_kernel_beginning.html">Linux Kernel 探險地圖</a>
      </li>
      <li class="post">
          <a href="https://danielmaker.github.io/blog/about/may-the-source-be-with-you.html">May The Source Be With You</a>
      </li>
    </ul>
  </section>
  <section>

    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="https://danielmaker.github.io/blog/category/about.html">About</a></li>
        <li><a href="https://danielmaker.github.io/blog/category/linux.html">Linux</a></li>
    </ul>
  </section>

  <section>
  <h1>Tags</h1>
    <a href="https://danielmaker.github.io/blog/tag/linux-kernel.html">Linux kernel</a>  </section>




  <!-- Creative Commons 授權條款 -->
  <a target="_blank" class="svg" rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_TW" style="display: inline-block;"
     title="姓名標示-非商業性-相同方式分享 4.0"><object alt="CreativeCommons: 姓名標示-非商業性-相同方式分享 4.0" data="https://danielmaker.github.io/blog/theme/images/by-nc-sa.svg" type="image/svg+xml" style="pointer-events: none;">/theme/images/by-nc-sa.svg</object></a>
  <!-- Creative Commons 授權條款 -->
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>

  <a target="_blank" rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_TW"
     title="姓名標示-非商業性-相同方式分享 4.0"><img alt="CreativeCommons: 姓名標示-非商業性-相同方式分享 4.0" src="https://danielmaker.github.io/blog/theme/images/cc-by-nc-sa-88x31.png" border="0" /></a>

    Copyright &copy;  2015&ndash;2016  Daniel Lin &mdash;

  <!-- Creative Commons 授權條款 -->
  本著作係採用
  <a target="_blank" rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_TW"
     title="姓名標示-非商業性-相同方式分享 4.0">Creative Commons BY-NC-SA 條款</a> 授權.
  <!-- Creative Commons 授權條款 -->

  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="https://danielmaker.github.io/blog/theme/js/modernizr-2.0.js"></script>
  <script src="https://danielmaker.github.io/blog/theme/js/ender.js"></script>
  <script src="https://danielmaker.github.io/blog/theme/js/octopress.js" type="text/javascript"></script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-71811903-1', 'auto');

    ga('send', 'pageview');
    </script>
  <script type="text/javascript">
    var disqus_shortname = 'danielmaker';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
  </script>
</body>
</html>